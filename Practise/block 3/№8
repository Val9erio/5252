import tkinter as tk
from tkinter import colorchooser, filedialog

current_color = "black"
drawing_shape = "line"  # "line" або "circle"
start_x = start_y = 0

def choose_color():
    global current_color
    color = colorchooser.askcolor()[1]
    if color:
        current_color = color

def set_line():
    global drawing_shape
    drawing_shape = "line"

def set_circle():
    global drawing_shape
    drawing_shape = "circle"

def start_draw(event):
    global start_x, start_y
    start_x, start_y = event.x, event.y

def draw(event):
    global start_x, start_y
    if drawing_shape == "line":
        canvas.create_line(start_x, start_y, event.x, event.y, fill=current_color, width=2)
        start_x, start_y = event.x, event.y
    elif drawing_shape == "circle":
        canvas.create_oval(start_x, start_y, event.x, event.y, outline=current_color, width=2)

def clear_canvas():
    canvas.delete("all")

def save_canvas():
    file = filedialog.asksaveasfilename(defaultextension=".ps",
                                        filetypes=[("PostScript files","*.ps")])
    if file:
        canvas.postscript(file=file)

window = tk.Tk()
window.title("Графіка")
window.geometry("650x500")

canvas = tk.Canvas(window, width=600, height=400, bg="white")
canvas.pack(pady=10)
canvas.bind("<Button-1>", start_draw)
canvas.bind("<B1-Motion>", draw)

frame = tk.Frame(window)
frame.pack()

tk.Button(frame, text="Колір", command=choose_color).pack(side="left", padx=5)
tk.Button(frame, text="Лінія", command=set_line).pack(side="left", padx=5)
tk.Button(frame, text="Коло", command=set_circle).pack(side="left", padx=5)
tk.Button(frame, text="Очистити", command=clear_canvas).pack(side="left", padx=5)
tk.Button(frame, text="Зберегти", command=save_canvas).pack(side="left", padx=5)

window.mainloop()
